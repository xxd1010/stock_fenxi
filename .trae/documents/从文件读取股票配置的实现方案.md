# 从文件读取股票配置的实现方案

## 问题分析

当前代码中，股票代码是硬编码在第140行的`stock_code = "sh.600000"`，需要修改为从文件中读取股票配置，每行一个股票代码。

## 实现方案

### 1. 创建读取股票配置文件的函数

* 新增`read_stock_config(file_path)`函数，用于读取股票配置文件

* 函数将读取指定文件，每行一个股票代码，返回股票代码列表

* 包含错误处理，确保文件不存在或读取失败时能优雅处理

### 2. 修改main函数

* 将原来的单个股票代码变量替换为股票代码列表

* 添加配置文件路径参数，默认为`"stock_config.txt"`

* 循环遍历所有股票代码，为每个股票获取数据

* 确保每个股票的数据都能正确处理

### 3. 优化数据保存逻辑

* 为每个股票创建独立的CSV文件，或修改保存逻辑以支持多个股票

* 确保数据库写入逻辑能正确处理多个股票的数据

## 代码修改点

1. **新增函数**：`read_stock_config(file_path)`
2. **修改main函数**：

   * 替换第140行的硬编码股票代码

   * 添加循环处理多个股票的逻辑

   * 优化数据保存逻辑

## 预期效果

* 程序将从配置文件中读取所有股票代码

* 为每个股票代码获取历史K线数据

* 将所有股票数据保存到数据库

* 为每个股票创建独立的CSV文件或合并保存

## 实现步骤

1. 实现`read_stock_config`函数
2. 修改main函数的配置参数部分
3. 添加循环处理多个股票的逻辑
4. 优化数据保存逻辑
5. 测试程序功能

这个方案将使程序更加灵活，可以通过修改配置文件来添加或删除需要获取数据的股票，而不需要修改代码。
